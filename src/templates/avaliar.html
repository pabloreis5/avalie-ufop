<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Avalie disciplinas e professores da UFOP de forma anÃ´nima." />
    <title>Avaliar - Avalie UFOP</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />
  </head>
  <body>
    <header>
      <div class="header-content">
        <a href="/" class="logo">
          <div class="logo-icon">ðŸ“š</div>
          <div class="logo-text">
            Avalie<span>UFOP</span>
          </div>
        </a>
        <nav>
          <a href="/">Home</a>
          <a href="/avaliar">Avaliar</a>
          <a href="/ranking">Ranking</a>
        </nav>
      </div>
    </header>

    <main>
      <div class="page-header">
        <h1>Avaliar Disciplina</h1>
        <p>Compartilhe sua experiÃªncia de forma anÃ´nima</p>
      </div>

      <!-- Flash messages do Flask -->
      {% with messages=get_flashed_messages(with_categories=true) %}
        {% if messages %}
          <div class="flash-messages">
            {% for category, message in messages %}
              <div class="flash {{ category }}">{{ message }}</div>
            {% endfor %}
          </div>
        {% endif %}
      {% endwith %}

      <div class="form-container">
        <form id="avaliar-form" method="POST" action="/avaliar">
          <!-- Curso -->
          <div class="form-group">
            <label for="curso_id">Curso <span class="required">*</span></label>
            <select id="curso_id" name="curso_id">
              <option value="">Selecione o curso...</option>
              {% for curso in cursos %}
                <option value="{{ curso.id }}">{{ curso.nome }}</option>
              {% endfor %}
            </select>
            <div id="curso-error" class="error-message">Por favor, selecione um curso.</div>
          </div>

          <!-- Disciplina -->
          <div class="form-group">
            <label for="disciplina_id">Disciplina <span class="required">*</span></label>
            <select id="disciplina" name="disciplina_id" disabled required>
              <option value="">Selecione o curso primeiro</option>
              {% for d in disciplinas %}
                <option value="{{ d['id'] }}" data-curso="{{ d['curso_id'] }}">{{ d['nome'] }}</option>
              {% endfor %}
            </select>

            <div id="disciplina-error" class="error-message">Por favor, selecione uma disciplina.</div>
          </div>

          <!-- Professor -->
          <div class="form-group">
            <label for="professor_id">Professor(a) <span class="required">*</span></label>
            <select id="professor" name="professor_id" disabled required>
              <option value="">Selecione o curso primeiro</option>
              {% for p in professores %}
                <option value="{{ p.id }}">{{ p.nome }}</option>
              {% endfor %}
            </select>
            <div id="professor-error" class="error-message">Por favor, selecione um professor.</div>
          </div>

          <!-- Nota (Estrelas) -->
          <div class="form-group">
            <label>Nota <span class="required">*</span></label>
            <div class="rating-container">
              <div class="star-rating">
                <input type="radio" id="star5" name="nota" value="5" />
                <label for="star5" title="5 - Excelente">â˜…</label>
                <input type="radio" id="star4" name="nota" value="4" />
                <label for="star4" title="4 - Muito Bom">â˜…</label>
                <input type="radio" id="star3" name="nota" value="3" />
                <label for="star3" title="3 - Bom">â˜…</label>
                <input type="radio" id="star2" name="nota" value="2" />
                <label for="star2" title="2 - Regular">â˜…</label>
                <input type="radio" id="star1" name="nota" value="1" />
                <label for="star1" title="1 - Ruim">â˜…</label>
              </div>
              <span id="rating-value" class="rating-value">Selecione uma nota de 0 a 5</span>
            </div>
            <div id="nota-error" class="error-message">Por favor, selecione uma nota.</div>
          </div>

          <!-- ComentÃ¡rio -->
          <div class="form-group">
            <label for="comentario">ComentÃ¡rio <span style="color: var(--text-muted); font-weight: normal;">(opcional)</span></label>
            <textarea id="comentario" name="comentario" placeholder="Compartilhe mais detalhes sobre sua experiÃªncia..." maxlength="500"></textarea>
          </div>

          <button id="btnEnviar" type="submit" disabled>Enviar avaliaÃ§Ã£o</button>
        </form>
      </div>
    </main>

    <footer>
      <p>Â© 2024 Avalie UFOP â€” Feito por estudantes, para estudantes.</p>
    </footer>

    <script src="{{ url_for('static', filename='app.js') }}"></script>

  </body>
</html>
