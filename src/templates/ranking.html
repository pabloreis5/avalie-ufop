<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Ranking das disciplinas mais bem avaliadas da UFOP." />
    <title>Ranking - Avalie UFOP</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />
  </head>
  <body>
    <header>
      <div class="header-content">
        <a href="/" class="logo">
          <div class="logo-icon">ğŸ“š</div>
          <div class="logo-text">
            Avalie<span>UFOP</span>
          </div>
        </a>
        <nav>
          <a href="/">Home</a>
          <a href="/avaliar">Avaliar</a>
          <a href="/ranking">Ranking</a>
        </nav>
      </div>
    </header>

    <main>
      <div class="page-header">
        <h1>Ranking de Disciplinas</h1>
        <p>As disciplinas mais bem avaliadas pelos estudantes</p>
      </div>

      {% if ranking and ranking|length > 0 %}
        <div class="ranking-container">
          <div class="ranking-header">
            <h2>ğŸ“Š {{ ranking|length }} disciplinas avaliadas</h2>
            <div class="search-box">
              <input type="text" id="ranking-search" placeholder="Buscar disciplina..." autocomplete="off" />
            </div>
          </div>

          <table id="ranking-table" class="ranking-table">
            <thead>
              <tr>
                <th style="width: 80px;">#</th>
                <th>Disciplina</th>
                <th>Curso</th>
                <th style="width: 120px;">Professor</th>
                <th style="width: 120px;">MÃ©dia</th>
                <th style="width: 120px;">AvaliaÃ§Ãµes</th>
              </tr>
            </thead>
            <tbody>
              {% for item in ranking %}
                <tr>
                  <td>
                    <span class="ranking-position {% if loop.index == 1 %}
                        top-1
                      {% elif loop.index == 2 %}
                        top-2
                      {% elif loop.index == 3 %}
                        top-3
                      {% endif %}">
                      {{ loop.index }}
                    </span>
                  </td>

                  <td>
                    <strong>{{ item.disciplina }}</strong>
                  </td>

                  <!-- CURSO (agora sempre vem preenchido/abreviado) -->
                  <td>{{ item.curso }}</td>

                  <!-- PROFESSOR (nova coluna, apÃ³s curso) -->
                  <td>{{ item.professor }}</td>

                  <td>
                    <span class="media-badge {% if item.media >= 4 %}
                        excellent
                      {% elif item.media >= 3 %}
                        good
                      {% else %}
                        average
                      {% endif %}">
                      â˜… {{ '%.1f'|format(item.media) }}
                    </span>
                  </td>

                  <!-- Contagem de avaliaÃ§Ãµes -->
                  <td>{{ item.total_avaliacoes }}</td>
                </tr>
              {% endfor %}
            </tbody>
          </table>

          <div id="no-results" class="no-results">
            <p>Nenhuma disciplina encontrada com esse termo.</p>
          </div>
        </div>
      {% else %}
        <div class="ranking-container">
          <div class="empty-state">
            <p>ğŸ“­ Ainda nÃ£o hÃ¡ avaliaÃ§Ãµes registradas.</p>
            <p style="margin-top: 1rem;">
              <a href="/avaliar" class="btn btn-primary">Seja o primeiro a avaliar!</a>
            </p>
          </div>
        </div>
      {% endif %}
    </main>

    <footer>
      <p>Â© 2024 Avalie UFOP â€” Feito por estudantes, para estudantes.</p>
    </footer>

    <script src="/static/app.js"></script>
  </body>
</html>
